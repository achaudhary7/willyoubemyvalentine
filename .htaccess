# Set index.html as the default file
DirectoryIndex index.html index.htm index.php

# Proper MIME types for XML and TXT files (critical for sitemaps)
AddType application/xml .xml
AddType text/plain .txt

# Force UTF-8 encoding
AddDefaultCharset UTF-8

# Ensure XML files are served with correct charset
<FilesMatch "\.xml$">
    Header set Content-Type "application/xml; charset=UTF-8"
</FilesMatch>

# Enable GZIP compression for better performance
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/html text/css text/javascript application/javascript application/xml text/xml text/plain
</IfModule>

# Cache static assets
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType image/svg+xml "access plus 1 month"
    ExpiresByType image/png "access plus 1 month"
    ExpiresByType image/jpg "access plus 1 month"
    ExpiresByType image/jpeg "access plus 1 month"
    ExpiresByType image/gif "access plus 1 month"
    ExpiresByType image/x-icon "access plus 1 month"
    ExpiresByType image/vnd.microsoft.icon "access plus 1 month"
</IfModule>

# Cache control for HTML (no cache - always fresh)
<IfModule mod_headers.c>
    <FilesMatch "\.html$">
        Header set Cache-Control "no-cache, no-store, must-revalidate"
        Header set Pragma "no-cache"
        Header set Expires "0"
    </FilesMatch>
    # CSS/JS use version query params for cache busting, so can cache longer
    <FilesMatch "\.(css|js)$">
        Header set Cache-Control "public, max-age=86400"
    </FilesMatch>
</IfModule>

# Prevent directory browsing
Options -Indexes

# Handle errors gracefully
ErrorDocument 404 /index.html
