<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-HDVZBTE0GC"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-HDVZBTE0GC');
    </script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    
    <!-- Primary Meta Tags (E-Card Focused Keywords) -->
    <title>Free Valentine E-Card Generator üíå Send Digital Valentine Card Online 2026</title>
    <meta name="title" content="Free Valentine E-Card Generator üíå Send Digital Valentine Card Online 2026">
    <meta name="description" content="Create a free will you be my valentine digital card! Send beautiful animated e-cards online via email or link. Interactive valentine card generator with envelope animation, custom messages & themes. 100% free, no signup!">
    <meta name="keywords" content="will you be my valentine e card, valentine digital card free, send valentine card online, valentine e card generator, will you be my valentine online card, free valentine ecard, valentine card with name, digital valentine card maker, interactive valentine card, animated valentine e card, valentine email card, will you be my valentine email, valentine card generator 2026">
    <meta name="author" content="WillYouBeMyValentine.fun">
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    
    <!-- Theme & Mobile -->
    <meta name="theme-color" content="#ff6b9d">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Valentine E-Card">
    <meta name="format-detection" content="telephone=no">
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://willyoubemyvalentine.fun/ecard/">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://willyoubemyvalentine.fun/ecard/">
    <meta property="og:site_name" content="Valentine E-Card Generator - Free Digital Valentine Cards">
    <meta property="og:title" content="Free Valentine E-Card Generator üíå Send Digital Valentine Card Online">
    <meta property="og:description" content="Create beautiful animated valentine e-cards! Send digital cards via email or link with custom messages, themes & envelope animation. 100% free!">
    <meta property="og:image" content="https://willyoubemyvalentine.fun/og-image.jpeg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Valentine E-Card Generator - Create Free Digital Valentine Cards">
    <meta property="og:locale" content="en_US">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://willyoubemyvalentine.fun/ecard/">
    <meta name="twitter:title" content="Free Valentine E-Card Generator üíå Send Digital Valentine Card Online">
    <meta name="twitter:description" content="Create beautiful animated valentine e-cards! Send digital cards via email or link. 100% free, no signup!">
    <meta name="twitter:image" content="https://willyoubemyvalentine.fun/og-image.jpeg">
    <meta name="twitter:image:alt" content="Valentine E-Card Generator - Free Digital Valentine Cards">
    
    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="/Favicon/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="/Favicon/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/Favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/Favicon/favicon-96x96.png">
    <link rel="apple-touch-icon" href="/Favicon/apple-icon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/Favicon/apple-icon-180x180.png">
    <link rel="manifest" href="/Favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ff6b9d">
    <meta name="msapplication-TileImage" content="/Favicon/ms-icon-144x144.png">
    
    <!-- Performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://firebaseio.com">
    
    <!-- Use main styles.css -->
    <link rel="stylesheet" href="../styles.css?v=16">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    
    <!-- Prevent flash when viewing e-card -->
    <script>
        if (new URLSearchParams(window.location.search).get('id')) {
            document.documentElement.classList.add('viewing-ecard');
        }
    </script>
    
    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Valentine E-Card Generator",
        "url": "https://willyoubemyvalentine.fun/ecard/",
        "description": "Create free digital valentine e-cards with beautiful animations, custom messages, and multiple themes.",
        "applicationCategory": "Entertainment",
        "operatingSystem": "Any",
        "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" },
        "author": { "@type": "Organization", "name": "WillYouBeMyValentine.fun" }
    }
    </script>
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {
                "@type": "Question",
                "name": "What is a valentine e-card?",
                "acceptedAnswer": { "@type": "Answer", "text": "A valentine e-card is an electronic greeting you send instead of a physical card. Our e-cards include beautiful envelope animations, personalized messages, multiple themes, and a fun interactive Yes/No game!" }
            },
            {
                "@type": "Question",
                "name": "Is the e-card generator free?",
                "acceptedAnswer": { "@type": "Answer", "text": "Yes! Our valentine e-card maker is 100% free. No signup required, no watermarks, no hidden fees. Create unlimited e-cards!" }
            },
            {
                "@type": "Question",
                "name": "How do I send the e-card?",
                "acceptedAnswer": { "@type": "Answer", "text": "After creating your e-card, you get a shareable link. Copy and paste it into any email, WhatsApp, or SMS to send your digital valentine!" }
            }
        ]
    }
    </script>
    
    <!-- E-Card specific styles -->
    <style>
        /* Theme backgrounds */
        body.theme-classic { background: linear-gradient(135deg, #fff0f0 0%, #ffe4e4 50%, #ffccd5 100%); }
        body.theme-roses { background: linear-gradient(135deg, #fff0f5 0%, #ffe4ec 50%, #ffd6e7 100%); }
        body.theme-cute { background: linear-gradient(135deg, #fff5f5 0%, #ffe8f0 50%, #ffd4e5 100%); }
        body.theme-purple { background: linear-gradient(135deg, #f5f0ff 0%, #ece4ff 50%, #e0d4f8 100%); }
        
        /* Hide intro when viewing e-card */
        html.viewing-ecard #introScreen { display: none !important; }
        
        /* E-Card Creator Form */
        .ecard-creator {
            background: white;
            border-radius: 20px;
            padding: 25px 20px;
            margin: 20px auto;
            max-width: 400px;
            box-shadow: 0 10px 40px rgba(255, 107, 157, 0.2);
        }
        
        .ecard-creator .form-group { margin-bottom: 15px; }
        .ecard-creator label {
            display: block;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 6px;
            font-size: 0.9rem;
        }
        .ecard-creator .form-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #f0e6f0;
            border-radius: 12px;
            font-size: 1rem;
            font-family: 'Poppins', sans-serif;
            transition: all 0.3s ease;
        }
        .ecard-creator .form-input:focus {
            outline: none;
            border-color: var(--primary-pink);
            box-shadow: 0 0 0 3px rgba(255, 107, 157, 0.1);
        }
        .ecard-creator textarea { min-height: 70px; resize: vertical; }
        
        /* Theme Picker */
        .theme-picker { margin: 15px 0; }
        .theme-options { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; }
        .theme-option { position: relative; cursor: pointer; }
        .theme-option input { position: absolute; opacity: 0; }
        .theme-card {
            padding: 10px 5px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            background: #f8f8f8;
        }
        .theme-option input:checked + .theme-card {
            border-color: var(--deep-pink);
            background: var(--light-pink);
        }
        .theme-card .theme-emoji { font-size: 1.5rem; display: block; }
        .theme-card .theme-name { font-size: 0.7rem; font-weight: 600; color: var(--text-dark); }
        
        /* Theme Selection Animation Container */
        .theme-animation-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
            overflow: hidden;
        }
        
        .theme-particle {
            position: absolute;
            pointer-events: none;
            will-change: transform, opacity;
            -webkit-transform: translateZ(0);
            transform: translateZ(0);
        }
        
        /* Mobile touch improvements for theme picker */
        .theme-option {
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }
        
        .theme-option label,
        .theme-card {
            touch-action: manipulation;
        }
        
        /* Classic Red - Floating Hearts */
        @keyframes floatHeart {
            0% { transform: translateY(0) rotate(0deg) scale(1); opacity: 1; }
            50% { transform: translateY(-100px) rotate(180deg) scale(1.2); }
            100% { transform: translateY(-200px) rotate(360deg) scale(0); opacity: 0; }
        }
        
        .particle-heart {
            font-size: 1.5rem;
            animation: floatHeart 1.5s ease-out forwards;
        }
        
        /* Roses - Falling Petals */
        @keyframes fallPetal {
            0% { transform: translateY(-20px) rotate(0deg) translateX(0); opacity: 1; }
            25% { transform: translateY(25vh) rotate(90deg) translateX(30px); }
            50% { transform: translateY(50vh) rotate(180deg) translateX(-20px); }
            75% { transform: translateY(75vh) rotate(270deg) translateX(20px); }
            100% { transform: translateY(100vh) rotate(360deg) translateX(0); opacity: 0; }
        }
        
        .particle-petal {
            font-size: 1.5rem;
            animation: fallPetal 3s ease-in-out forwards;
        }
        
        /* Cute - Bouncing Hearts */
        @keyframes bounceHeart {
            0% { transform: scale(0) translateY(0); opacity: 1; }
            20% { transform: scale(1.3) translateY(-30px); }
            40% { transform: scale(0.9) translateY(0); }
            60% { transform: scale(1.1) translateY(-15px); }
            80% { transform: scale(0.95) translateY(0); }
            100% { transform: scale(0) translateY(-50px); opacity: 0; }
        }
        
        .particle-bounce {
            font-size: 1.8rem;
            animation: bounceHeart 1.2s ease-out forwards;
        }
        
        /* Purple - Sparkle Stars */
        @keyframes sparkle {
            0% { transform: scale(0) rotate(0deg); opacity: 1; }
            25% { transform: scale(1.2) rotate(90deg); opacity: 1; }
            50% { transform: scale(0.8) rotate(180deg); opacity: 0.8; }
            75% { transform: scale(1) rotate(270deg); opacity: 0.6; }
            100% { transform: scale(0) rotate(360deg); opacity: 0; }
        }
        
        .particle-sparkle {
            font-size: 1.2rem;
            animation: sparkle 1s ease-out forwards;
        }
        
        /* Theme card selection animation */
        .theme-card {
            transition: all 0.3s ease;
        }
        
        .theme-option input:checked + .theme-card {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(255, 107, 157, 0.3);
        }
        
        .theme-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        /* Envelope styles */
        .envelope-container { perspective: 1000px; width: 100%; max-width: 320px; margin: 0 auto; }
        .envelope { position: relative; width: 100%; padding-bottom: 70%; cursor: pointer; }
        .envelope-back {
            position: absolute; width: 100%; height: 100%;
            background: linear-gradient(135deg, #f8e1e8, #ffe4ec);
            border-radius: 10px; box-shadow: 0 10px 40px rgba(0,0,0,0.15);
        }
        .envelope-flap {
            position: absolute; top: 0; left: 0; width: 100%; height: 50%;
            background: linear-gradient(180deg, #ff6b9d, #ff8fab);
            clip-path: polygon(0 0, 50% 100%, 100% 0);
            transform-origin: top center; transition: transform 0.8s ease; z-index: 3;
        }
        .envelope.open .envelope-flap { transform: rotateX(180deg); }
        .envelope-front {
            position: absolute; bottom: 0; left: 0; width: 100%; height: 60%;
            background: linear-gradient(180deg, #ffb6c1, #ffc0cb);
            border-radius: 0 0 10px 10px; z-index: 2;
        }
        .envelope-seal {
            position: absolute; top: 35%; left: 50%;
            transform: translate(-50%, -50%); font-size: 2.5rem; z-index: 4;
            animation: pulse 1.5s infinite; transition: opacity 0.5s ease;
        }
        .envelope.open .envelope-seal { opacity: 0; }
        .tap-text { text-align: center; margin-top: 20px; color: var(--text-light); animation: fadeInOut 2s infinite; }
        
        /* Theme envelope colors */
        body.theme-classic .envelope-flap { background: linear-gradient(180deg, #e74c3c, #c0392b); }
        body.theme-classic .envelope-front { background: linear-gradient(180deg, #f5b7b1, #fadbd8); }
        body.theme-purple .envelope-flap { background: linear-gradient(180deg, #9c27b0, #7b1fa2); }
        body.theme-purple .envelope-front { background: linear-gradient(180deg, #ce93d8, #e1bee7); }
        body.theme-cute .envelope-flap { background: linear-gradient(180deg, #ff9a9e, #fecfef); }
        body.theme-cute .envelope-front { background: linear-gradient(180deg, #ffd6e7, #ffe8f0); }
        
        /* Valentine Card (after envelope opens) */
        .valentine-card {
            background: white; border-radius: 20px; padding: 30px 20px;
            max-width: 380px; width: 90%; margin: 0 auto;
            text-align: center; box-shadow: 0 15px 50px rgba(255, 107, 157, 0.3);
            animation: cardAppear 0.8s ease;
        }
        @keyframes cardAppear { from { opacity: 0; transform: scale(0.8) translateY(30px); } to { opacity: 1; transform: scale(1) translateY(0); } }
        .valentine-card.theme-classic { border-top: 5px solid #e74c3c; }
        .valentine-card.theme-roses { border-top: 5px solid #ff6b9d; }
        .valentine-card.theme-cute { border-top: 5px solid #ff9a9e; }
        .valentine-card.theme-purple { border-top: 5px solid #9c27b0; }
        .card-from-to .from-label, .card-from-to .to-label { font-size: 0.75rem; color: var(--text-light); text-transform: uppercase; }
        .card-from-to .from-name, .card-from-to .to-name { font-family: 'Dancing Script', cursive; font-size: 1.5rem; color: var(--deep-pink); }
        .card-message {
            font-size: 0.95rem; color: var(--text-dark); line-height: 1.6; margin: 20px 0;
            padding: 15px; background: var(--light-pink); border-radius: 12px; font-style: italic;
        }
        .card-question { font-family: 'Dancing Script', cursive; font-size: 1.8rem; color: var(--deep-pink); margin-bottom: 20px; }
        
        /* Response buttons */
        .response-buttons { display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; }
        .yes-btn, .no-btn { padding: 12px 35px; border-radius: 30px; font-size: 1rem; font-weight: 600; cursor: pointer; border: none; }
        .yes-btn { background: linear-gradient(135deg, #4CAF50, #45a049); color: white; box-shadow: 0 5px 20px rgba(76, 175, 80, 0.4); }
        .yes-btn:hover { transform: scale(1.05); }
        .no-btn { background: linear-gradient(135deg, #ff6b6b, #ee5a5a); color: white; position: relative; }
        
        /* Loading screen */
        .loading-screen { display: flex; align-items: center; justify-content: center; min-height: 100vh; text-align: center; }
        .loading-screen .loading-emoji { font-size: 4rem; animation: pulse 1.5s infinite; }
        
        /* Link screen styles - using #linkScreen for specificity to override main styles.css */
        #linkScreen .link-container { 
            display: block !important;
            flex-direction: unset !important;
            background: white; 
            border-radius: 20px; 
            padding: 25px 20px; 
            max-width: 420px; 
            width: 90%; 
            margin: 20px auto; 
            box-shadow: 0 10px 40px rgba(255, 107, 157, 0.2); 
            text-align: center;
        }
        #linkScreen .card-preview { 
            background: linear-gradient(135deg, var(--primary-pink), var(--deep-pink)); 
            border-radius: 15px; 
            padding: 20px; 
            margin-bottom: 20px; 
            color: white; 
            text-align: center;
        }
        #linkScreen .preview-label { font-size: 0.7rem; opacity: 0.8; text-transform: uppercase; }
        #linkScreen .preview-names { font-family: 'Dancing Script', cursive; font-size: 1.3rem; }
        #linkScreen .link-box { 
            background: #f8f8f8; 
            border-radius: 10px; 
            padding: 10px; 
            margin-bottom: 15px; 
            display: flex !important; 
            flex-direction: row !important;
            align-items: center; 
            gap: 10px; 
        }
        #linkScreen .link-url { 
            flex: 1; 
            font-size: 0.8rem; 
            color: var(--text-light); 
            word-break: break-all; 
            text-align: left;
        }
        #linkScreen .copy-btn { 
            background: var(--primary-pink); 
            color: white; 
            border: none; 
            padding: 8px 12px; 
            border-radius: 8px; 
            cursor: pointer; 
            font-size: 0.85rem;
            white-space: nowrap;
        }
        #linkScreen .share-buttons { 
            display: flex !important; 
            flex-direction: row !important;
            gap: 8px; 
            justify-content: center; 
            flex-wrap: wrap; 
            margin-bottom: 15px; 
        }
        #linkScreen .share-btn { 
            padding: 10px 16px; 
            border-radius: 20px; 
            border: none; 
            font-size: 0.85rem; 
            font-weight: 600; 
            cursor: pointer; 
            color: white;
            width: auto !important;
            max-width: none !important;
        }
        #linkScreen .share-btn.whatsapp { background: #25D366; }
        #linkScreen .share-btn.email { background: #EA4335; }
        #linkScreen .share-btn.sms { background: #5856D6; }
        #linkScreen .action-buttons { display: flex; gap: 10px; justify-content: center; margin-top: 15px; }
        #linkScreen .action-btn { 
            padding: 10px 20px; 
            border-radius: 20px; 
            font-size: 0.85rem; 
            font-weight: 600; 
            cursor: pointer; 
            text-decoration: none; 
        }
        #linkScreen .action-btn.test { background: white; color: var(--deep-pink); border: 2px solid var(--deep-pink); }
        #linkScreen .action-btn.track { background: #9c27b0; color: white; border: none; }
        
        /* Back Button Styling - Modern Theme Style */
        .back-btn {
            display: inline-block;
            background: linear-gradient(135deg, var(--primary-pink), var(--deep-pink));
            color: white;
            border: none;
            padding: 12px 28px;
            border-radius: 50px;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            box-shadow: 0 4px 15px rgba(255, 107, 157, 0.3);
        }
        .back-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(255, 107, 157, 0.4);
        }
        .back-btn:active {
            transform: translateY(0);
        }
        
        /* Confetti */
        .confetti-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 5; }
        .confetti { position: absolute; width: 10px; height: 10px; animation: confettiFall 3s ease-out forwards; }
        @keyframes confettiFall { 0% { transform: translateY(-100px) rotate(0deg); opacity: 1; } 100% { transform: translateY(100vh) rotate(720deg); opacity: 0; } }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
        @keyframes fadeInOut { 0%, 100% { opacity: 0.5; } 50% { opacity: 1; } }
        
        /* Success screen */
        .success-content { z-index: 10; text-align: center; }
        .success-heart { font-size: 5rem; animation: heartBeat 1s infinite; margin-bottom: 20px; }
        @keyframes heartBeat { 0%, 100% { transform: scale(1); } 25% { transform: scale(1.1); } 50% { transform: scale(1); } 75% { transform: scale(1.15); } }
        
        /* Countdown Timer */
        .countdown-timer {
            background: linear-gradient(135deg, rgba(255, 107, 157, 0.15), rgba(233, 30, 99, 0.1));
            border: 1px solid rgba(255, 107, 157, 0.3);
            border-radius: 16px;
            padding: 8px 14px;
            display: inline-block;
        }
        .countdown-label {
            font-size: 0.7rem;
            color: var(--deep-pink);
            font-weight: 600;
            margin-bottom: 4px;
        }
        .countdown-display {
            display: flex;
            gap: 6px;
            justify-content: center;
        }
        .countdown-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: white;
            padding: 4px 8px;
            border-radius: 8px;
            min-width: 36px;
            box-shadow: 0 2px 8px rgba(255, 107, 157, 0.15);
        }
        .countdown-item span {
            font-size: 1rem;
            font-weight: 700;
            color: var(--deep-pink);
            line-height: 1;
        }
        .countdown-item small {
            font-size: 0.55rem;
            color: var(--text-light);
            text-transform: uppercase;
            margin-top: 2px;
        }
        .countdown-timer.finished .countdown-label { font-size: 0.85rem; }
        .countdown-timer.finished .countdown-display { display: none; }
        
        /* Live Counter */
        .live-counter {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            background: linear-gradient(135deg, #fff5f7, #ffe8ee);
            border: 1px solid rgba(255, 107, 157, 0.25);
            padding: 6px 14px;
            border-radius: 25px;
            font-size: 0.8rem;
            color: var(--text-dark);
            animation: pulse-soft 2s infinite ease-in-out;
        }
        .live-counter .counter-icon {
            font-size: 0.9rem;
            animation: heartbeat-counter 1.5s infinite;
        }
        .live-counter .counter-text { font-weight: 500; }
        .live-counter #valentineCount { font-weight: 700; color: var(--deep-pink); }
        @keyframes pulse-soft { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.02); } }
        @keyframes heartbeat-counter { 0%, 100% { transform: scale(1); } 25% { transform: scale(1.1); } 50% { transform: scale(1); } 75% { transform: scale(1.15); } }
        
        /* Testimonials */
        .testimonials-mini { width: 100%; max-width: 300px; margin: 0 auto 10px; position: relative; min-height: 65px; }
        .testimonial-card { display: none; background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,240,245,0.95)); border: 1px solid rgba(255,107,157,0.2); border-radius: 10px; padding: 10px 14px; text-align: center; animation: fadeIn 0.5s ease; }
        .testimonial-card.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .testimonial-quote { display: block; font-size: 0.8rem; color: var(--text-dark); font-style: italic; line-height: 1.4; margin-bottom: 5px; }
        .testimonial-author { display: block; font-size: 0.7rem; color: var(--primary-pink); font-weight: 600; }
        .testimonial-dots { display: flex; justify-content: center; gap: 5px; margin-top: 6px; }
        .testimonial-dots .dot { width: 7px; height: 7px; border-radius: 50%; background: rgba(255,107,157,0.3); cursor: pointer; transition: all 0.3s ease; }
        .testimonial-dots .dot.active { background: var(--primary-pink); transform: scale(1.2); }
        
        /* QR Code */
        .qr-section { margin: 12px 0; border: 1px solid rgba(255,107,157,0.2); border-radius: 10px; overflow: hidden; background: linear-gradient(135deg, #fff5f7, #fff); }
        .qr-header { display: flex; align-items: center; justify-content: center; gap: 6px; padding: 10px 14px; cursor: pointer; transition: background 0.3s ease; }
        .qr-header:hover { background: rgba(255,107,157,0.05); }
        .qr-toggle-icon { font-size: 1rem; }
        .qr-toggle-text { font-size: 0.8rem; font-weight: 600; color: var(--text-dark); }
        .qr-arrow { font-size: 0.65rem; color: var(--text-light); transition: transform 0.3s ease; }
        .qr-section.open .qr-arrow { transform: rotate(180deg); }
        .qr-content { padding: 0 14px 14px; text-align: center; animation: slideDown 0.3s ease; }
        @keyframes slideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .qr-code-container { display: flex; justify-content: center; margin-bottom: 8px; }
        .qr-code-container canvas { border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .qr-hint { font-size: 0.7rem; color: var(--text-light); margin-bottom: 8px; }
        .btn-qr-download { background: linear-gradient(135deg, var(--primary-pink), var(--deep-pink)); color: white; border: none; padding: 8px 18px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(255,107,157,0.3); }
        .btn-qr-download:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(255,107,157,0.4); }
    </style>
</head>
<body>
    <!-- Theme Animation Container -->
    <div id="themeAnimationContainer" class="theme-animation-container"></div>
    
    <!-- Loading Screen (for recipient view) -->
    <div id="loadingScreen" class="screen loading-screen" style="display: none;">
        <div>
            <div class="loading-emoji">üíå</div>
            <p style="margin-top: 20px; color: var(--text-light);">Loading your valentine...</p>
        </div>
    </div>

    <!-- Intro Section - Same structure as homepage -->
    <section class="screen intro-screen active" id="introScreen">
        <div class="intro-wrapper">
            <div class="intro-content" style="padding-top: 5px;">
                <div class="heart-icon pulse" style="font-size: 2.2rem; margin-bottom: 2px;">üíå</div>
                <span class="year-badge" style="margin-bottom: 4px; padding: 3px 10px; font-size: 0.7rem;">Valentine's Day 2026</span>
                
                <!-- Countdown Timer -->
                <div class="countdown-timer" id="countdownTimer" style="margin: 6px 0;">
                    <div class="countdown-label">‚è∞ Valentine's Day in</div>
                    <div class="countdown-display" id="countdownDisplay">
                        <div class="countdown-item"><span id="countDays">--</span><small>days</small></div>
                        <div class="countdown-item"><span id="countHours">--</span><small>hrs</small></div>
                        <div class="countdown-item"><span id="countMins">--</span><small>min</small></div>
                        <div class="countdown-item"><span id="countSecs">--</span><small>sec</small></div>
                    </div>
                </div>
                
                <h1 class="title" style="font-size: 1.6rem; margin-bottom: 4px;">Valentine E-Card Generator</h1>
                <p class="subtitle" style="font-size: 1.2rem; margin-bottom: 8px; line-height: 1.6;">
                    Create beautiful digital Valentine cards with envelope animations!
                    Send via email, WhatsApp, or any app. 100% free.
                </p>
                
                <!-- Live Counter -->
                <div class="live-counter" id="liveCounter" style="margin-bottom: 10px;">
                    <span class="counter-icon">üíï</span>
                    <span class="counter-text"><span id="valentineCount">--</span> Valentines sent!</span>
                </div>
                
                <!-- Trust Badges Section -->
                <div class="trust-badges compact" style="margin-bottom: 8px;">
                    <div class="trust-badge">
                        <span class="trust-icon">üîí</span>
                        <span>Safe</span>
                    </div>
                    <div class="trust-badge">
                        <span class="trust-icon">üÜì</span>
                        <span>Free</span>
                    </div>
                    <div class="trust-badge">
                        <span class="trust-icon">‚úÖ</span>
                        <span>No Signup</span>
                    </div>
                    <div class="trust-badge">
                        <span class="trust-icon">üö´</span>
                        <span>No Ads</span>
                    </div>
                </div>
                
                <!-- Testimonials Section -->
                <div class="testimonials-mini" id="testimonialsMini">
                    <div class="testimonial-card active" id="testimonial1">
                        <span class="testimonial-quote">"The envelope animation was so beautiful! üíå"</span>
                        <span class="testimonial-author">‚Äî Lisa & James</span>
                    </div>
                    <div class="testimonial-card" id="testimonial2">
                        <span class="testimonial-quote">"Perfect e-card! She loved the custom message! üíï"</span>
                        <span class="testimonial-author">‚Äî Ryan & Sophie</span>
                    </div>
                    <div class="testimonial-card" id="testimonial3">
                        <span class="testimonial-quote">"Sent it via WhatsApp - worked perfectly! üì±"</span>
                        <span class="testimonial-author">‚Äî Kevin & Amy</span>
                    </div>
                    <div class="testimonial-card" id="testimonial4">
                        <span class="testimonial-quote">"The purple theme matched our wedding colors! üíú"</span>
                        <span class="testimonial-author">‚Äî Daniel & Maria</span>
                    </div>
                    <div class="testimonial-dots">
                        <span class="dot active" onclick="showTestimonial(0)"></span>
                        <span class="dot" onclick="showTestimonial(1)"></span>
                        <span class="dot" onclick="showTestimonial(2)"></span>
                        <span class="dot" onclick="showTestimonial(3)"></span>
                    </div>
                </div>
                
                <button class="btn btn-primary" onclick="showECardCreator()" aria-label="Create your Valentine E-Card" style="margin-bottom: 6px; padding: 10px 24px;">
                    <span>Create E-Card</span>
                    <span class="btn-arrow" aria-hidden="true">‚Üí</span>
                </button>
                
                <a href="/" class="ecard-link" aria-label="Try simple Valentine Link" style="margin-bottom: 4px; font-size: 0.8rem;">
                    üíù Or Try Simple Valentine Link
                </a>
                
                <!-- Share This Site Button -->
                <div class="share-site-section" style="margin-top: 4px;">
                    <button class="share-site-btn" onclick="toggleShareMenu()" aria-label="Share this website">
                        <span class="share-icon">üì§</span>
                        <span>Share This Site</span>
                    </button>
                    <div class="share-menu" id="shareMenu">
                        <button class="share-menu-item" onclick="shareSiteWhatsApp()">
                            <span>üí¨</span> WhatsApp
                        </button>
                        <button class="share-menu-item" onclick="shareSiteTelegram()">
                            <span>‚úàÔ∏è</span> Telegram
                        </button>
                        <button class="share-menu-item" onclick="shareSiteTwitter()">
                            <span>üê¶</span> Twitter
                        </button>
                        <button class="share-menu-item" onclick="copySiteLink()">
                            <span>üìã</span> Copy Link
                        </button>
                    </div>
                </div>
                
                <p class="scroll-hint" onclick="scrollToInfo()" style="margin-top: 6px; font-size: 0.8rem;">‚Üì Learn More</p>
            </div>
            
            <!-- Info Sections -->
            <div class="info-sections" id="infoSections">
                
                <!-- How It Works -->
                <section class="info-section" id="howItWorks">
                    <h2 class="section-title">üíï How It Works</h2>
                    <div class="steps-container">
                        <div class="step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h3>Enter Names</h3>
                                <p>Add your name and their name for a personalized e-card</p>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h3>Choose Theme</h3>
                                <p>Pick from beautiful themes: Classic Red, Roses, Cute, or Purple</p>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h3>Add Message</h3>
                                <p>Write a custom love message or use our romantic default</p>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <h3>Share & Track!</h3>
                                <p>Send via WhatsApp, email, or link. Track when they open it!</p>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Features -->
                <section class="info-section" id="features">
                    <h2 class="section-title">‚ú® Features</h2>
                    <div class="features-grid">
                        <div class="feature-card">
                            <span class="feature-emoji">üíå</span>
                            <h3>Envelope Animation</h3>
                            <p>Beautiful opening effect reveals your card</p>
                        </div>
                        <div class="feature-card">
                            <span class="feature-emoji">üé®</span>
                            <h3>Multiple Themes</h3>
                            <p>4 romantic themes to match your style</p>
                        </div>
                        <div class="feature-card">
                            <span class="feature-emoji">üí¨</span>
                            <h3>Custom Message</h3>
                            <p>Add your own heartfelt love note</p>
                        </div>
                        <div class="feature-card">
                            <span class="feature-emoji">üòÇ</span>
                            <h3>Runaway No Button</h3>
                            <p>The No button playfully escapes!</p>
                        </div>
                        <div class="feature-card">
                            <span class="feature-emoji">üìä</span>
                            <h3>Track Responses</h3>
                            <p>Know when they open & respond</p>
                        </div>
                        <div class="feature-card">
                            <span class="feature-emoji">üíØ</span>
                            <h3>100% Free</h3>
                            <p>No hidden costs, no signup</p>
                        </div>
                    </div>
                </section>
                
                <!-- FAQ -->
                <section class="info-section" id="faqSection">
                    <h2 class="section-title">‚ùì Frequently Asked Questions</h2>
                    <div class="faq-container">
                        <div class="faq-item" onclick="toggleFaq(this)">
                            <div class="faq-question">
                                <span>What is a valentine e-card?</span>
                                <span class="faq-toggle">+</span>
                            </div>
                            <div class="faq-answer">
                                <p>A valentine e-card is an electronic greeting you send instead of a physical card. Our e-cards include beautiful envelope animations, personalized messages, multiple themes, and a fun interactive Yes/No game!</p>
                            </div>
                        </div>
                        <div class="faq-item" onclick="toggleFaq(this)">
                            <div class="faq-question">
                                <span>How do I send the e-card via email?</span>
                                <span class="faq-toggle">+</span>
                            </div>
                            <div class="faq-answer">
                                <p>After creating your e-card, you'll get a shareable link. Click the Email button or copy the link to paste into any email. Your recipient just clicks to open their beautiful animated valentine!</p>
                            </div>
                        </div>
                        <div class="faq-item" onclick="toggleFaq(this)">
                            <div class="faq-question">
                                <span>Is the e-card generator free?</span>
                                <span class="faq-toggle">+</span>
                            </div>
                            <div class="faq-answer">
                                <p>Yes! Our valentine e-card maker is 100% free. No signup required, no watermarks, no hidden fees. Create unlimited e-cards!</p>
                            </div>
                        </div>
                        <div class="faq-item" onclick="toggleFaq(this)">
                            <div class="faq-question">
                                <span>Can I add my own message?</span>
                                <span class="faq-toggle">+</span>
                            </div>
                            <div class="faq-answer">
                                <p>Absolutely! You can write a custom love message that appears on your e-card. If you leave it blank, a beautiful default romantic message will be used.</p>
                            </div>
                        </div>
                        <div class="faq-item" onclick="toggleFaq(this)">
                            <div class="faq-question">
                                <span>What themes are available?</span>
                                <span class="faq-toggle">+</span>
                            </div>
                            <div class="faq-answer">
                                <p>We offer 4 beautiful themes: Classic Red Hearts, Romantic Roses, Cute & Playful, and Elegant Purple. Each has unique colors and envelope styling!</p>
                            </div>
                        </div>
                        <div class="faq-item" onclick="toggleFaq(this)">
                            <div class="faq-question">
                                <span>Can I track if they opened it?</span>
                                <span class="faq-toggle">+</span>
                            </div>
                            <div class="faq-answer">
                                <p>Yes! After creating your e-card, click "Track Now" to see when they opened it and whether they said Yes. Real-time updates!</p>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- About -->
                <section class="info-section about-section" id="aboutSection">
                    <h2 class="section-title">üíñ About Valentine E-Card Generator</h2>
                    <div class="about-content">
                        <p>Welcome to the <strong>Valentine E-Card Generator</strong> - create beautiful <strong>digital valentine cards</strong> with stunning envelope animations! Our <strong>free e-card maker</strong> helps you send personalized valentine greetings via email, WhatsApp, or any messaging app.</p>
                        <p>Features include:</p>
                        <ul class="about-list">
                            <li>üíå Beautiful envelope opening animation</li>
                            <li>üåπ 4 romantic themes to choose from</li>
                            <li>üíï Custom message or romantic default</li>
                            <li>üëÄ Track when they open & respond</li>
                            <li>üòÑ Fun runaway No button game</li>
                            <li>üíØ 100% free, no signup required</li>
                        </ul>
                    </div>
                </section>
                
                <!-- Keywords -->
                <section class="info-section keywords-section">
                    <h2 class="section-title">üåπ Popular E-Card Searches</h2>
                    <div class="keywords-cloud">
                        <span class="keyword-tag">valentine e card free</span>
                        <span class="keyword-tag">digital valentine card</span>
                        <span class="keyword-tag">send valentine card online</span>
                        <span class="keyword-tag">valentine email card</span>
                        <span class="keyword-tag">will you be my valentine e card</span>
                        <span class="keyword-tag">free valentine ecard generator</span>
                        <span class="keyword-tag">animated valentine card</span>
                        <span class="keyword-tag">valentine card with name</span>
                        <span class="keyword-tag">online valentine card maker</span>
                        <span class="keyword-tag">interactive valentine card</span>
                        <span class="keyword-tag">valentine card 2026</span>
                    </div>
                </section>
                
                <!-- Footer -->
                <footer class="footer">
                    <div class="footer-brand">üíï WillYouBeMyValentine.fun</div>
                    <div class="footer-links">
                        <a href="#faqSection" onclick="scrollToFaq(); return false;">FAQ</a>
                        <a href="#aboutSection">About</a>
                        <a href="/articles/">Articles</a>
                        <a href="#" onclick="showPrivacyModal(); return false;">Privacy</a>
                    </div>
                    <div class="footer-badges">
                        <span>üîí Safe</span>
                        <span>üÜì Free</span>
                        <span>‚ù§Ô∏è Made with Love</span>
                    </div>
                    <p class="footer-copyright">¬© 2026 WillYouBeMyValentine.fun - Free Valentine E-Card Generator</p>
                </footer>
            </div>
        </div>
    </section>
    
    <!-- E-Card Creator Screen -->
    <section class="screen" id="creatorScreen">
        <div class="name-input-wrapper">
            <div class="ecard-creator">
                <div class="heart-icon pulse" style="font-size: 2.5rem; margin-bottom: 15px;">üíå</div>
                <h2 class="input-title">Create Your E-Card</h2>
                
                <div class="form-group">
                    <label>üíù Your Name (From)</label>
                    <input type="text" id="senderName" class="form-input" placeholder="Enter your name" maxlength="30">
                </div>
                
                <div class="form-group">
                    <label>üíï Their Name (To)</label>
                    <input type="text" id="recipientName" class="form-input" placeholder="Enter their name" maxlength="30">
                </div>
                
                <div class="theme-picker">
                    <label>üé® Choose Theme</label>
                    <div class="theme-options">
                        <label class="theme-option">
                            <input type="radio" name="theme" value="classic" checked>
                            <div class="theme-card">
                                <span class="theme-emoji">‚ù§Ô∏è</span>
                                <span class="theme-name">Classic</span>
                            </div>
                        </label>
                        <label class="theme-option">
                            <input type="radio" name="theme" value="roses">
                            <div class="theme-card">
                                <span class="theme-emoji">üåπ</span>
                                <span class="theme-name">Roses</span>
                            </div>
                        </label>
                        <label class="theme-option">
                            <input type="radio" name="theme" value="cute">
                            <div class="theme-card">
                                <span class="theme-emoji">üíó</span>
                                <span class="theme-name">Cute</span>
                            </div>
                        </label>
                        <label class="theme-option">
                            <input type="radio" name="theme" value="purple">
                            <div class="theme-card">
                                <span class="theme-emoji">üíú</span>
                                <span class="theme-name">Purple</span>
                            </div>
                        </label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>üí¨ Custom Message (Optional)</label>
                    <textarea id="customMessage" class="form-input" placeholder="Add a personal love message..."></textarea>
                </div>
                
                <button class="btn btn-primary" onclick="createECard()" style="width: 100%;">
                    <span>‚ú® Create E-Card ‚ú®</span>
                </button>
                
                <div style="text-align: center; margin-top: 20px;">
                    <button class="back-btn" onclick="goToIntro()">‚Üê Back</button>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Link Ready Screen -->
    <section class="screen" id="linkScreen">
        <div class="link-wrapper" style="display: flex; align-items: center; justify-content: center; min-height: 100vh; padding: 20px;">
            <div class="link-container">
                <div class="heart-icon" style="font-size: 2.5rem; margin-bottom: 10px;">üíå</div>
                <h2 class="input-title">Your E-Card is Ready!</h2>
                
                <div class="card-preview">
                    <div class="preview-label">From</div>
                    <div class="preview-names" id="previewFrom">Your Name</div>
                    <div class="preview-label" style="margin-top: 8px;">To</div>
                    <div class="preview-names" id="previewTo">Their Name</div>
                    <div style="margin-top: 8px; font-size: 0.85rem; opacity: 0.9;" id="previewTheme">‚ù§Ô∏è Classic Red</div>
                </div>
                
                <div class="link-box">
                    <span class="link-url" id="generatedLink">https://willyoubemyvalentine.fun/ecard/?...</span>
                    <button class="copy-btn" onclick="copyLink()">üìã Copy</button>
                </div>
                
                <div class="share-buttons">
                    <button class="share-btn whatsapp" onclick="shareWhatsApp()">üì± WhatsApp</button>
                    <button class="share-btn email" onclick="shareEmail()">üìß Email</button>
                    <button class="share-btn sms" onclick="shareSMS()">üí¨ SMS</button>
                </div>
                
                <!-- QR Code Section -->
                <div class="qr-section" id="qrSection">
                    <div class="qr-header" onclick="toggleQrSection()">
                        <span class="qr-toggle-icon">üì±</span>
                        <span class="qr-toggle-text">Get QR Code for Printed Cards</span>
                        <span class="qr-arrow" id="qrArrow">‚ñº</span>
                    </div>
                    <div class="qr-content" id="qrContent" style="display: none;">
                        <div class="qr-code-container">
                            <canvas id="qrCanvas"></canvas>
                        </div>
                        <p class="qr-hint">Perfect for in-person surprises & printed cards!</p>
                        <button class="btn-qr-download" onclick="downloadQRCode()">
                            <span>üì• Download QR Code</span>
                        </button>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="action-btn test" onclick="testECard()">üëÄ Test It</button>
                    <button class="action-btn track" onclick="openDashboard()">üìä Track Now</button>
                </div>
                
                <button class="back-btn" onclick="goToIntro()" style="margin-top: 15px;">‚Üê Create Another</button>
            </div>
        </div>
    </section>
    
    <!-- Envelope Screen (Recipient) -->
    <section class="screen" id="envelopeScreen">
        <div style="display: flex; align-items: center; justify-content: center; min-height: 100vh; flex-direction: column; padding: 20px;">
            <div class="envelope-container">
                <div class="envelope" onclick="openEnvelope()">
                    <div class="envelope-back"></div>
                    <div class="envelope-flap"></div>
                    <div class="envelope-front"></div>
                    <div class="envelope-seal">üíñ</div>
                </div>
            </div>
            <p class="tap-text">üíå Tap to open your valentine!</p>
        </div>
    </section>
    
    <!-- Card Screen (Recipient) -->
    <section class="screen" id="cardScreen">
        <div style="display: flex; align-items: center; justify-content: center; min-height: 100vh; padding: 20px;">
            <div class="valentine-card" id="valentineCard">
                <div class="card-from-to">
                    <div class="from-label">From</div>
                    <div class="from-name" id="cardFrom">Someone Special</div>
                    <div style="margin: 10px 0; font-size: 1.5rem;">üíï</div>
                    <div class="to-label">To</div>
                    <div class="to-name" id="cardTo">You</div>
                </div>
                <div class="card-message" id="cardMessage">Every moment with you is precious!</div>
                <h2 class="card-question">Will You Be My Valentine?</h2>
                <div class="response-buttons">
                    <button class="yes-btn" onclick="sayYes()">Yes! üíï</button>
                    <button class="no-btn" id="noBtn">No</button>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Success Screen -->
    <section class="screen" id="successScreen">
        <div class="confetti-container" id="confettiContainer"></div>
        <div style="display: flex; align-items: center; justify-content: center; min-height: 100vh;">
            <div class="success-content">
                <div class="success-heart">üíñ</div>
                <h1 class="title" style="color: var(--deep-pink);">Yay! You Said Yes!</h1>
                <p class="subtitle">This is the beginning of something beautiful!</p>
                <div style="font-family: 'Dancing Script', cursive; font-size: 1.8rem; color: var(--deep-pink); margin-top: 20px;">
                    <span id="successFrom">Name</span> üíï <span id="successTo">Name</span>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Dashboard Modal -->
    <div id="dashboardModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 400px;">
            <button class="modal-close" onclick="closeDashboard()">√ó</button>
            <h3 class="modal-title">üìä E-Card Tracking</h3>
            <div id="dashboardContent">
                <p style="text-align: center; color: var(--text-light);">Loading...</p>
            </div>
        </div>
    </div>
    
    <!-- Privacy Modal -->
    <div id="privacyModal" class="modal" style="display: none;">
        <div class="modal-content">
            <button class="modal-close" onclick="closePrivacyModal()">√ó</button>
            <h3 class="modal-title">üîí Privacy Policy</h3>
            <div class="privacy-content">
                <h4>Your Privacy Matters</h4>
                <p><strong>WillYouBeMyValentine.fun</strong> is committed to protecting your privacy.</p>
                <h4>What We DON'T Collect:</h4>
                <ul>
                    <li>‚ùå No personal information</li>
                    <li>‚ùå No email addresses</li>
                    <li>‚ùå No location data</li>
                    <li>‚ùå No account creation required</li>
                </ul>
                <p>The e-card link only contains names you enter - nothing else is stored or tracked.</p>
                <p>Last updated: February 2026</p>
            </div>
        </div>
    </div>

    <!-- QR Code Library -->
    <script src="https://cdn.jsdelivr.net/npm/qrious@4.0.2/dist/qrious.min.js"></script>
    
    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
        import { getDatabase, ref, set, get, onValue } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-database.js";
        
        const firebaseConfig = {
            apiKey: "AIzaSyBQNAhOgaB-Dl0KSwBXtBDmN8THhuGZjno",
            authDomain: "willyoubemyvalentinefun.firebaseapp.com",
            databaseURL: "https://willyoubemyvalentinefun-default-rtdb.firebaseio.com",
            projectId: "willyoubemyvalentinefun",
            storageBucket: "willyoubemyvalentinefun.firebasestorage.app",
            messagingSenderId: "483037233730",
            appId: "1:483037233730:web:473242923ec224a2ac63db"
        };
        
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        
        window.firebaseDb = database;
        window.firebaseRef = ref;
        window.firebaseSet = set;
        window.firebaseGet = get;
        window.firebaseOnValue = onValue;
        window.firebaseReady = true;
        if (window.onFirebaseReady) window.onFirebaseReady();
    </script>
    
    <script>
        // Global variables
        let currentECardId = null;
        let currentECardData = null;
        let ecardSaved = false;
        
        const DEFAULT_MESSAGES = [
            "Every moment with you is precious. You make my heart skip a beat! üíï",
            "You're the reason I believe in love. Be mine forever? üíñ",
            "My heart chose you, and it always will. Happy Valentine's Day! üåπ"
        ];
        
        const THEME_EMOJIS = { classic: '‚ù§Ô∏è', roses: 'üåπ', cute: 'üíó', purple: 'üíú' };
        const THEME_NAMES = { classic: 'Classic Red', roses: 'Romantic Roses', cute: 'Cute & Playful', purple: 'Elegant Purple' };
        
        // Screen management
        function showScreen(screenId) {
            document.getElementById('loadingScreen').style.display = 'none';
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
            window.scrollTo(0, 0);
        }
        
        function showECardCreator() { showScreen('creatorScreen'); }
        function goToIntro() { showScreen('introScreen'); }
        
        // Theme Animation - works on both desktop and mobile
        function playThemeAnimation(theme) {
            const container = document.getElementById('themeAnimationContainer');
            if (!container) return;
            container.innerHTML = ''; // Clear previous
            
            // Detect mobile for reduced particle count
            const isMobile = window.innerWidth <= 768;
            const viewportWidth = window.innerWidth;
            const viewportHeight = window.innerHeight;
            
            const animations = {
                classic: { emoji: '‚ù§Ô∏è', class: 'particle-heart', count: isMobile ? 10 : 15 },
                roses: { emoji: 'üåπ', class: 'particle-petal', count: isMobile ? 12 : 20 },
                cute: { emoji: 'üíó', class: 'particle-bounce', count: isMobile ? 8 : 12 },
                purple: { emoji: '‚ú®', class: 'particle-sparkle', count: isMobile ? 15 : 25 }
            };
            
            const config = animations[theme];
            if (!config) return;
            
            // Create particles using requestAnimationFrame for smoother mobile performance
            let particleIndex = 0;
            const createParticle = () => {
                if (particleIndex >= config.count) return;
                
                const particle = document.createElement('div');
                particle.className = `theme-particle ${config.class}`;
                particle.textContent = config.emoji;
                particle.style.fontSize = isMobile ? '1.2rem' : '1.5rem';
                
                // Random position within viewport
                const x = Math.random() * (viewportWidth - 30); // Keep within bounds
                const y = theme === 'roses' 
                    ? -30 // Start above for falling
                    : (viewportHeight * 0.2) + (Math.random() * viewportHeight * 0.5);
                
                particle.style.left = x + 'px';
                particle.style.top = y + 'px';
                
                // Random delay variation for natural feel
                particle.style.animationDelay = (Math.random() * 0.2) + 's';
                
                container.appendChild(particle);
                
                // Remove after animation
                const removeTime = theme === 'roses' ? 3500 : 2000;
                setTimeout(() => {
                    if (particle.parentNode) particle.remove();
                }, removeTime);
                
                particleIndex++;
                
                // Schedule next particle
                const delay = theme === 'roses' ? (isMobile ? 80 : 100) : (isMobile ? 40 : 50);
                setTimeout(createParticle, delay);
            };
            
            // Start creating particles
            requestAnimationFrame(createParticle);
        }
        
        // Theme background
        function applyThemeBackground(theme) {
            document.body.classList.remove('theme-classic', 'theme-roses', 'theme-cute', 'theme-purple');
            if (theme) document.body.classList.add('theme-' + theme);
        }
        
        // E-Card creation
        function createECard() {
            const senderName = document.getElementById('senderName').value.trim();
            const recipientName = document.getElementById('recipientName').value.trim();
            const theme = document.querySelector('input[name="theme"]:checked').value;
            const customMessage = document.getElementById('customMessage').value.trim();
            
            if (!senderName) { alert('Please enter your name!'); return; }
            if (!recipientName) { alert('Please enter their name!'); return; }
            
            const ecardId = 'ec_' + Date.now().toString(36) + Math.random().toString(36).substr(2, 5);
            const ecardData = {
                from: senderName, to: recipientName, theme: theme,
                message: customMessage || DEFAULT_MESSAGES[Math.floor(Math.random() * DEFAULT_MESSAGES.length)],
                createdAt: new Date().toISOString(), viewed: false, responded: false
            };
            
            saveECardToFirebase(ecardId, ecardData);
            currentECardId = ecardId;
            currentECardData = ecardData;
            
            const link = `https://willyoubemyvalentine.fun/ecard/?id=${ecardId}`;
            document.getElementById('generatedLink').textContent = link;
            document.getElementById('previewFrom').textContent = senderName;
            document.getElementById('previewTo').textContent = recipientName;
            document.getElementById('previewTheme').textContent = `${THEME_EMOJIS[theme]} ${THEME_NAMES[theme]}`;
            
            applyThemeBackground(theme);
            showScreen('linkScreen');
            
            // Generate QR code
            generateQRCode(link);
        }
        
        function saveECardToFirebase(id, data) {
            ecardSaved = false;
            if (!window.firebaseReady) { setTimeout(() => saveECardToFirebase(id, data), 500); return; }
            const ecardRef = window.firebaseRef(window.firebaseDb, 'valentines/' + id);
            window.firebaseSet(ecardRef, data).then(() => { ecardSaved = true; }).catch(err => console.error('Save error:', err));
        }
        
        // Link actions
        function copyLink() {
            const link = document.getElementById('generatedLink').textContent;
            navigator.clipboard.writeText(link).then(() => {
                const btn = document.querySelector('.copy-btn');
                btn.textContent = '‚úì Copied!';
                setTimeout(() => { btn.textContent = 'üìã Copy'; }, 2000);
            });
        }
        
        function shareWhatsApp() {
            const link = document.getElementById('generatedLink').textContent;
            window.open(`https://wa.me/?text=${encodeURIComponent('üíå I made you a Valentine e-card! Open it: ' + link)}`, '_blank');
        }
        
        function shareEmail() {
            const link = document.getElementById('generatedLink').textContent;
            window.location.href = `mailto:?subject=${encodeURIComponent('üíå You Have a Valentine E-Card!')}&body=${encodeURIComponent('Someone special made you a Valentine e-card!\n\nOpen it here: ' + link)}`;
        }
        
        function shareSMS() {
            const link = document.getElementById('generatedLink').textContent;
            window.location.href = `sms:?body=${encodeURIComponent('üíå I made you a Valentine e-card! Open it: ' + link)}`;
        }
        
        function testECard() {
            if (!currentECardId) return;
            if (!ecardSaved) {
                setTimeout(() => window.open(`?id=${currentECardId}&test=1`, '_blank'), 1500);
            } else {
                window.open(`?id=${currentECardId}&test=1`, '_blank');
            }
        }
        
        // Dashboard
        function openDashboard() {
            if (!currentECardId) return;
            document.getElementById('dashboardModal').style.display = 'flex';
            loadDashboardData();
        }
        
        function closeDashboard() { document.getElementById('dashboardModal').style.display = 'none'; }
        
        function loadDashboardData() {
            if (!window.firebaseReady || !currentECardId) return;
            const ecardRef = window.firebaseRef(window.firebaseDb, 'valentines/' + currentECardId);
            window.firebaseOnValue(ecardRef, (snapshot) => {
                const data = snapshot.val();
                if (data) {
                    document.getElementById('dashboardContent').innerHTML = `
                        <div style="background: var(--light-pink); padding: 15px; border-radius: 12px; margin-bottom: 15px;">
                            <p><strong>To:</strong> ${data.to}</p>
                            <p><strong>Theme:</strong> ${THEME_EMOJIS[data.theme]} ${THEME_NAMES[data.theme]}</p>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                            <div style="background: ${data.viewed ? '#d4edda' : '#f8f9fa'}; padding: 15px; border-radius: 10px; text-align: center;">
                                <div style="font-size: 1.5rem;">${data.viewed ? '‚úÖ' : '‚è≥'}</div>
                                <div style="font-weight: 600;">${data.viewed ? 'Viewed!' : 'Not Yet'}</div>
                            </div>
                            <div style="background: ${data.responded ? '#d4edda' : '#f8f9fa'}; padding: 15px; border-radius: 10px; text-align: center;">
                                <div style="font-size: 1.5rem;">${data.responded ? 'üíï' : '‚è≥'}</div>
                                <div style="font-weight: 600;">${data.responded ? 'Said Yes!' : 'Waiting'}</div>
                            </div>
                        </div>
                    `;
                }
            });
        }
        
        // Recipient view
        function openEnvelope() {
            const envelope = document.querySelector('.envelope');
            if (envelope.classList.contains('open')) return;
            envelope.classList.add('open');
            document.querySelector('.tap-text').style.display = 'none';
            setTimeout(() => showCardScreen(), 1200);
        }
        
        function showCardScreen() {
            const data = currentECardData;
            if (!data) return;
            
            applyThemeBackground(data.theme);
            document.getElementById('valentineCard').className = 'valentine-card theme-' + data.theme;
            document.getElementById('cardFrom').textContent = data.from;
            document.getElementById('cardTo').textContent = data.to;
            document.getElementById('cardMessage').textContent = data.message;
            document.getElementById('successFrom').textContent = data.from;
            document.getElementById('successTo').textContent = data.to;
            
            showScreen('cardScreen');
            setupNoButton();
        }
        
        function setupNoButton() {
            const noBtn = document.getElementById('noBtn');
            let moveCount = 0;
            const moveButton = () => {
                moveCount++;
                if (moveCount >= 5) { noBtn.textContent = 'Fine... üò¢'; noBtn.style.opacity = '0.5'; return; }
                const messages = ['Are you sure?', 'Really?', 'Think again!', 'Please? ü•∫'];
                noBtn.textContent = messages[Math.min(moveCount - 1, messages.length - 1)];
                noBtn.style.position = 'fixed';
                noBtn.style.left = (Math.random() * (window.innerWidth - 100)) + 'px';
                noBtn.style.top = (Math.random() * (window.innerHeight - 50)) + 'px';
                noBtn.style.zIndex = '100';
            };
            noBtn.addEventListener('mouseenter', moveButton);
            noBtn.addEventListener('touchstart', moveButton);
        }
        
        function sayYes() {
            if (window.firebaseReady && currentECardId) {
                const ecardRef = window.firebaseRef(window.firebaseDb, 'valentines/' + currentECardId);
                window.firebaseSet(ecardRef, { ...currentECardData, responded: true, respondedAt: new Date().toISOString() });
            }
            showScreen('successScreen');
            createConfetti();
        }
        
        function createConfetti() {
            const container = document.getElementById('confettiContainer');
            container.innerHTML = '';
            const shapes = ['‚ù§Ô∏è', 'üíï', 'üíñ', 'üíó', '‚ú®', 'üåπ'];
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.animationDelay = Math.random() * 2 + 's';
                confetti.style.fontSize = (Math.random() * 20 + 10) + 'px';
                confetti.textContent = shapes[Math.floor(Math.random() * shapes.length)];
                container.appendChild(confetti);
            }
        }
        
        // URL params
        function checkUrlParams() {
            const params = new URLSearchParams(window.location.search);
            const ecardId = params.get('id');
            if (ecardId) {
                document.getElementById('introScreen').classList.remove('active');
                document.getElementById('loadingScreen').style.display = 'flex';
                loadECardFromFirebase(ecardId);
            }
        }
        
        function loadECardFromFirebase(id, retryCount = 0) {
            if (!window.firebaseReady) {
                if (retryCount < 10) setTimeout(() => loadECardFromFirebase(id, retryCount + 1), 500);
                else showECardNotFoundError();
                return;
            }
            const ecardRef = window.firebaseRef(window.firebaseDb, 'valentines/' + id);
            window.firebaseGet(ecardRef).then((snapshot) => {
                if (snapshot.exists()) {
                    currentECardId = id;
                    currentECardData = snapshot.val();
                    if (!currentECardData.viewed) {
                        window.firebaseSet(ecardRef, { ...currentECardData, viewed: true, viewedAt: new Date().toISOString() });
                    }
                    applyThemeBackground(currentECardData.theme);
                    showScreen('envelopeScreen');
                } else {
                    showECardNotFoundError();
                }
            }).catch(() => {
                if (retryCount < 2) setTimeout(() => loadECardFromFirebase(id, retryCount + 1), 1000);
                else showECardNotFoundError();
            });
        }
        
        function showECardNotFoundError() {
            document.body.innerHTML = `
                <div style="display: flex; align-items: center; justify-content: center; min-height: 100vh; text-align: center; padding: 20px; background: linear-gradient(135deg, #fff0f5, #ffe4ec);">
                    <div>
                        <div style="font-size: 4rem; margin-bottom: 20px;">üíî</div>
                        <h2 style="font-family: 'Dancing Script', cursive; font-size: 2rem; color: #ff4081; margin-bottom: 15px;">E-Card Not Found</h2>
                        <p style="color: #666; margin-bottom: 25px;">This e-card may have expired or the link is invalid.</p>
                        <a href="/ecard/" style="display: inline-block; background: linear-gradient(135deg, #ff6b9d, #ff4081); color: white; padding: 14px 30px; border-radius: 25px; text-decoration: none; font-weight: 600;">Create New E-Card</a>
                    </div>
                </div>
            `;
        }
        
        // UI functions (same as homepage)
        function toggleFaq(element) { element.classList.toggle('open'); }
        function scrollToInfo() { document.getElementById('infoSections').scrollIntoView({ behavior: 'smooth' }); }
        function scrollToFaq() { document.getElementById('faqSection').scrollIntoView({ behavior: 'smooth' }); }
        function toggleShareMenu() { document.getElementById('shareMenu').classList.toggle('active'); }
        function shareSiteWhatsApp() { window.open('https://wa.me/?text=' + encodeURIComponent('Create free Valentine E-Cards! üíå https://willyoubemyvalentine.fun/ecard/'), '_blank'); }
        function shareSiteTelegram() { window.open('https://t.me/share/url?url=' + encodeURIComponent('https://willyoubemyvalentine.fun/ecard/'), '_blank'); }
        function shareSiteTwitter() { window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent('Create free Valentine E-Cards! üíå') + '&url=' + encodeURIComponent('https://willyoubemyvalentine.fun/ecard/'), '_blank'); }
        function copySiteLink() { navigator.clipboard.writeText('https://willyoubemyvalentine.fun/ecard/'); }
        function showPrivacyModal() { document.getElementById('privacyModal').style.display = 'flex'; }
        function closePrivacyModal() { document.getElementById('privacyModal').style.display = 'none'; }
        
        // ============================================================================
        // QR CODE GENERATION
        // ============================================================================
        
        let currentQRLink = null;
        
        function toggleQrSection() {
            const qrSection = document.getElementById('qrSection');
            const qrContent = document.getElementById('qrContent');
            if (!qrSection || !qrContent) return;
            
            const isOpen = qrContent.style.display !== 'none';
            if (isOpen) {
                qrContent.style.display = 'none';
                qrSection.classList.remove('open');
            } else {
                qrContent.style.display = 'block';
                qrSection.classList.add('open');
                // Always regenerate when opening
                if (currentQRLink) {
                    setTimeout(() => generateQRCode(currentQRLink), 100);
                }
            }
        }
        
        function generateQRCode(link) {
            const canvas = document.getElementById('qrCanvas');
            currentQRLink = link;
            
            // Check if QRious library is loaded
            if (!window.QRious) {
                setTimeout(() => generateQRCode(link), 300);
                return;
            }
            
            if (!canvas) {
                setTimeout(() => generateQRCode(link), 300);
                return;
            }
            
            // Generate the QR code using QRious
            try {
                new QRious({
                    element: canvas,
                    value: link,
                    size: 160,
                    level: 'M',
                    foreground: '#e91e63',
                    background: '#ffffff',
                    padding: 10
                });
            } catch (error) {
                console.error('QR Code generation error:', error);
            }
        }
        
        function downloadQRCode() {
            const canvas = document.getElementById('qrCanvas');
            if (!canvas) return;
            const link = document.createElement('a');
            link.download = 'valentine-ecard-qr.png';
            link.href = canvas.toDataURL('image/png');
            link.click();
        }
        
        // ============================================================================
        // TESTIMONIALS ROTATION
        // ============================================================================
        
        let currentTestimonial = 0;
        let testimonialInterval = null;
        
        function initTestimonials() {
            const testimonials = document.querySelectorAll('.testimonial-card');
            if (testimonials.length === 0) return;
            
            testimonialInterval = setInterval(() => {
                currentTestimonial = (currentTestimonial + 1) % testimonials.length;
                showTestimonial(currentTestimonial);
            }, 4000);
        }
        
        function showTestimonial(index) {
            const testimonials = document.querySelectorAll('.testimonial-card');
            const dots = document.querySelectorAll('.testimonial-dots .dot');
            if (testimonials.length === 0) return;
            
            currentTestimonial = index;
            testimonials.forEach(t => t.classList.remove('active'));
            dots.forEach(d => d.classList.remove('active'));
            
            if (testimonials[index]) testimonials[index].classList.add('active');
            if (dots[index]) dots[index].classList.add('active');
            
            if (testimonialInterval) {
                clearInterval(testimonialInterval);
                testimonialInterval = setInterval(() => {
                    currentTestimonial = (currentTestimonial + 1) % testimonials.length;
                    showTestimonial(currentTestimonial);
                }, 4000);
            }
        }
        
        // ============================================================================
        // COUNTDOWN TIMER
        // ============================================================================
        
        function initCountdownTimer() {
            const countdownTimer = document.getElementById('countdownTimer');
            if (!countdownTimer) return;
            
            // Valentine's Day 2026 - February 14, 2026 at midnight
            const valentinesDay = new Date('2026-02-14T00:00:00');
            
            function updateCountdown() {
                const now = new Date();
                const diff = valentinesDay - now;
                
                if (diff <= 0) {
                    const label = countdownTimer.querySelector('.countdown-label');
                    if (label) label.textContent = "üíï Happy Valentine's Day! üíï";
                    countdownTimer.classList.add('finished');
                    return;
                }
                
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const mins = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const secs = Math.floor((diff % (1000 * 60)) / 1000);
                
                const daysEl = document.getElementById('countDays');
                const hoursEl = document.getElementById('countHours');
                const minsEl = document.getElementById('countMins');
                const secsEl = document.getElementById('countSecs');
                
                if (daysEl) daysEl.textContent = days;
                if (hoursEl) hoursEl.textContent = hours.toString().padStart(2, '0');
                if (minsEl) minsEl.textContent = mins.toString().padStart(2, '0');
                if (secsEl) secsEl.textContent = secs.toString().padStart(2, '0');
            }
            
            updateCountdown();
            setInterval(updateCountdown, 1000);
        }
        
        // ============================================================================
        // LIVE VALENTINE COUNTER
        // ============================================================================
        
        function initLiveCounter() {
            const counterEl = document.getElementById('valentineCount');
            if (!counterEl) return;
            
            if (!window.firebaseReady) {
                if (!window.liveCounterRetries) window.liveCounterRetries = 0;
                window.liveCounterRetries++;
                
                if (window.liveCounterRetries < 5) {
                    setTimeout(initLiveCounter, 500);
                } else {
                    counterEl.textContent = '2,000+';
                }
                return;
            }
            
            const valentinesRef = window.firebaseRef(window.firebaseDb, 'valentines');
            window.firebaseOnValue(valentinesRef, (snapshot) => {
                const data = snapshot.val();
                if (data) {
                    const count = Object.keys(data).length;
                    animateCounter(counterEl, count);
                } else {
                    counterEl.textContent = '2,000+';
                }
            }, (error) => {
                // Permission denied - show estimated count silently
                counterEl.textContent = '2,000+';
            });
        }
        
        function animateCounter(element, target) {
            const current = parseInt(element.textContent.replace(/,/g, '')) || 0;
            const diff = target - current;
            
            if (Math.abs(diff) < 5) {
                element.textContent = target.toLocaleString();
                return;
            }
            
            const duration = 1000;
            const steps = 30;
            const stepValue = diff / steps;
            let step = 0;
            
            const interval = setInterval(() => {
                step++;
                const newValue = Math.round(current + (stepValue * step));
                element.textContent = newValue.toLocaleString();
                
                if (step >= steps) {
                    clearInterval(interval);
                    element.textContent = target.toLocaleString();
                }
            }, duration / steps);
        }
        
        // Init
        document.addEventListener('DOMContentLoaded', () => {
            checkUrlParams();
            initCountdownTimer();
            initLiveCounter();
            initTestimonials();
            
            // Theme selection - handle both change and click events for better mobile support
            const themeRadios = document.querySelectorAll('input[name="theme"]');
            themeRadios.forEach(radio => {
                radio.addEventListener('change', (e) => {
                    const theme = e.target.value;
                    applyThemeBackground(theme);
                    playThemeAnimation(theme);
                });
            });
            
            // Also handle click on theme cards for mobile touch
            document.querySelectorAll('.theme-card').forEach(card => {
                card.addEventListener('click', (e) => {
                    // Find the associated radio input
                    const radio = card.parentElement.querySelector('input[type="radio"]');
                    if (radio && !radio.checked) {
                        radio.checked = true;
                        const theme = radio.value;
                        applyThemeBackground(theme);
                        playThemeAnimation(theme);
                    }
                });
                
                // Handle touch events explicitly for mobile
                card.addEventListener('touchend', (e) => {
                    e.preventDefault();
                    const radio = card.parentElement.querySelector('input[type="radio"]');
                    if (radio && !radio.checked) {
                        radio.checked = true;
                        const theme = radio.value;
                        applyThemeBackground(theme);
                        playThemeAnimation(theme);
                    }
                }, { passive: false });
            });
        });
        
        // Close modals on outside click
        document.getElementById('dashboardModal').addEventListener('click', (e) => { if (e.target.id === 'dashboardModal') closeDashboard(); });
        document.getElementById('privacyModal').addEventListener('click', (e) => { if (e.target.id === 'privacyModal') closePrivacyModal(); });
    </script>
    
    <noscript>
        <div style="padding: 40px; text-align: center;">
            <h2>JavaScript Required</h2>
            <p>Please enable JavaScript to use the Valentine E-Card Generator.</p>
            <a href="/">‚Üê Go to Simple Valentine Link</a>
        </div>
    </noscript>
</body>
</html>
